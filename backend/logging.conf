# Logging configuration for Nabavki Data Platform Backend
# Supports multiple environments with JSON structured logging

[loggers]
keys=root,nabavki,sqlalchemy,uvicorn

[handlers]
keys=console,file,json_file,syslog

[formatters]
keys=standard,json,detailed

[logger_root]
level=INFO
handlers=console

[logger_nabavki]
level=DEBUG
handlers=console,json_file
qualName=nabavki
propagate=0

[logger_sqlalchemy]
level=WARNING
handlers=console
qualName=sqlalchemy.engine
propagate=0

[logger_uvicorn]
level=INFO
handlers=console
qualName=uvicorn
propagate=0

[handler_console]
class=StreamHandler
level=DEBUG
formatter=standard
args=(sys.stdout,)

[handler_file]
class=handlers.RotatingFileHandler
level=INFO
formatter=detailed
args=('/var/log/nabavki/app.log', 'a', 10485760, 5, 'utf-8')

[handler_json_file]
class=handlers.RotatingFileHandler
level=INFO
formatter=json
args=('/var/log/nabavki/app.json', 'a', 10485760, 5, 'utf-8')

[handler_syslog]
class=handlers.SysLogHandler
level=WARNING
formatter=standard
args=(('localhost', 514), handlers.SysLogHandler.LOG_USER)

[formatter_standard]
format=%(asctime)s [%(levelname)s] %(name)s: %(message)s
datefmt=%Y-%m-%d %H:%M:%S

[formatter_json]
class=pythonjsonlogger.jsonlogger.JsonFormatter
format=%(asctime)s %(name)s %(levelname)s %(message)s %(pathname)s %(lineno)d

[formatter_detailed]
format=%(asctime)s [%(levelname)s] %(name)s [%(filename)s:%(lineno)d] - %(message)s
datefmt=%Y-%m-%d %H:%M:%S
